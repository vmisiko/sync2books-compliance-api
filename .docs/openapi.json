{
  "openapi": "3.0.0",
  "paths": {
    "/": {
      "get": {
        "operationId": "AppController_getHello",
        "parameters": [],
        "responses": {
          "200": {
            "description": ""
          }
        },
        "tags": [
          "App"
        ]
      }
    },
    "/catalog/items": {
      "post": {
        "operationId": "CatalogController_registerItem",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterCatalogItemDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Item created or updated"
          }
        },
        "summary": "Create or update compliance item",
        "tags": [
          "Catalog"
        ]
      }
    },
    "/catalog/merchants/{merchantId}/items": {
      "get": {
        "operationId": "CatalogController_listItems",
        "parameters": [
          {
            "name": "merchantId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Item list"
          }
        },
        "summary": "List compliance items",
        "tags": [
          "Catalog"
        ]
      }
    },
    "/inventory/movements": {
      "post": {
        "operationId": "InventoryController_recordMovement",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RecordMovementDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Stock movement recorded"
          }
        },
        "summary": "Create stock movement",
        "tags": [
          "Inventory"
        ]
      }
    },
    "/inventory/branches/{branchId}/items/{itemId}": {
      "get": {
        "operationId": "InventoryController_getStockLevel",
        "parameters": [
          {
            "name": "branchId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "itemId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Stock level"
          }
        },
        "summary": "Get stock level for item in branch",
        "tags": [
          "Inventory"
        ]
      }
    },
    "/documents": {
      "post": {
        "operationId": "DocumentsController_createDocument",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateDocumentDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Document created"
          }
        },
        "summary": "Create compliance document (DRAFT)",
        "tags": [
          "Documents"
        ]
      }
    },
    "/documents/{id}": {
      "get": {
        "operationId": "DocumentsController_getDocument",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Document details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetSaleResponseDto"
                }
              }
            }
          }
        },
        "summary": "Get document details",
        "tags": [
          "Documents"
        ]
      }
    },
    "/documents/merchants/{merchantId}": {
      "get": {
        "operationId": "DocumentsController_listDocuments",
        "parameters": [
          {
            "name": "merchantId",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Document list"
          }
        },
        "summary": "List documents by merchant",
        "tags": [
          "Documents"
        ]
      }
    },
    "/documents/{id}/validate": {
      "post": {
        "operationId": "DocumentsController_validateDocument",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Validation result"
          }
        },
        "summary": "Validate document before submission",
        "tags": [
          "Documents"
        ]
      }
    },
    "/documents/{id}/prepare": {
      "post": {
        "operationId": "DocumentsController_prepareDocument",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Prepared"
          }
        },
        "summary": "Prepare document for submission",
        "tags": [
          "Documents"
        ]
      }
    },
    "/documents/{id}/submit": {
      "post": {
        "operationId": "DocumentsController_submitDocument",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Submission result"
          }
        },
        "summary": "Submit document to eTIMS",
        "tags": [
          "Documents"
        ]
      }
    },
    "/api/sales": {
      "get": {
        "operationId": "ApiSalesController_listSales",
        "parameters": [
          {
            "name": "merchantId",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "cursor",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "pageSize",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Sales report list",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SalesReportListResponseDto"
                }
              }
            }
          }
        },
        "summary": "List sales (Digitax-like report)",
        "tags": [
          "API Sales"
        ]
      },
      "post": {
        "operationId": "ApiSalesController_createSale",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSaleDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Sale created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SaleCreateResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Validation failed"
          }
        },
        "summary": "Create a sale (Digitax-like)",
        "tags": [
          "API Sales"
        ]
      }
    },
    "/api/sales/{id}": {
      "get": {
        "operationId": "ApiSalesController_getSale",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Sale details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetSaleResponseDto"
                }
              }
            }
          }
        },
        "summary": "Get sale status/details",
        "tags": [
          "API Sales"
        ]
      }
    },
    "/api/sales/{id}/report": {
      "get": {
        "operationId": "ApiSalesController_getSaleReport",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Sale report detail",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SalesReportDetailResponseDto"
                }
              }
            }
          }
        },
        "summary": "Get sale (Digitax-like report)",
        "tags": [
          "API Sales"
        ]
      }
    },
    "/dashboard-api/sales": {
      "get": {
        "operationId": "DashboardSalesController_listSales",
        "parameters": [
          {
            "name": "merchantId",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "cursor",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "pageSize",
            "required": true,
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Sales report list",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SalesReportListResponseDto"
                }
              }
            }
          }
        },
        "summary": "List sales (Digitax-like report)",
        "tags": [
          "Dashboard Sales"
        ]
      },
      "post": {
        "operationId": "DashboardSalesController_createSale",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSaleDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Sale created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SaleCreateResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Validation failed"
          }
        },
        "summary": "Create a sale (dashboard)",
        "tags": [
          "Dashboard Sales"
        ]
      }
    },
    "/dashboard-api/sales/{id}": {
      "get": {
        "operationId": "DashboardSalesController_getSale",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Sale details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetSaleResponseDto"
                }
              }
            }
          }
        },
        "summary": "Get sale status/details",
        "tags": [
          "Dashboard Sales"
        ]
      }
    },
    "/dashboard-api/sales/{id}/report": {
      "get": {
        "operationId": "DashboardSalesController_getSaleReport",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Sale report detail",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SalesReportDetailResponseDto"
                }
              }
            }
          }
        },
        "summary": "Get sale (Digitax-like report)",
        "tags": [
          "Dashboard Sales"
        ]
      }
    }
  },
  "info": {
    "title": "Sync2Books Compliance API",
    "description": "Unified compliance abstraction layer for eTIMS (OSCU).",
    "version": "1.0.0",
    "contact": {}
  },
  "tags": [],
  "servers": [],
  "components": {
    "schemas": {
      "RegisterCatalogItemDto": {
        "type": "object",
        "properties": {
          "merchantId": {
            "type": "string"
          },
          "externalId": {
            "type": "string",
            "description": "ERP/external item id (e.g. QuickBooks Item.Id)"
          },
          "name": {
            "type": "string"
          },
          "sku": {
            "type": "object",
            "nullable": true
          },
          "itemType": {
            "type": "string",
            "enum": [
              "GOODS",
              "SERVICE"
            ]
          },
          "taxCategory": {
            "type": "string",
            "enum": [
              "VAT_STANDARD",
              "VAT_ZERO",
              "EXEMPT",
              "OTHER"
            ]
          },
          "classificationCode": {
            "type": "string",
            "description": "OSCU item classification code (itemClsCd) override"
          },
          "unitCode": {
            "type": "string",
            "description": "OSCU unit of quantity code (qtyUnitCd) override"
          },
          "internalUnit": {
            "type": "string",
            "description": "Internal/ERP unit identifier (EA, PCS, EACH...)"
          },
          "packagingUnitCode": {
            "type": "string",
            "description": "OSCU packaging unit code (pkgUnitCd) override"
          },
          "taxTyCd": {
            "type": "string",
            "description": "OSCU tax type code (taxTyCd) override"
          },
          "productTypeCode": {
            "type": "string",
            "description": "OSCU product type code (itemTyCd) override"
          }
        },
        "required": [
          "merchantId",
          "externalId",
          "name",
          "itemType",
          "taxCategory"
        ]
      },
      "RecordMovementDto": {
        "type": "object",
        "properties": {
          "itemId": {
            "type": "string"
          },
          "branchId": {
            "type": "string"
          },
          "movementType": {
            "type": "string",
            "enum": [
              "SALE",
              "PURCHASE",
              "TRANSFER_OUT",
              "TRANSFER_IN",
              "ADJUSTMENT",
              "RETURN"
            ]
          },
          "quantity": {
            "type": "number"
          },
          "referenceType": {
            "type": "object",
            "nullable": true
          },
          "referenceId": {
            "type": "object",
            "nullable": true
          }
        },
        "required": [
          "itemId",
          "branchId",
          "movementType",
          "quantity"
        ]
      },
      "CreateDocumentLineDto": {
        "type": "object",
        "properties": {
          "itemId": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "quantity": {
            "type": "number"
          },
          "unitPrice": {
            "type": "number"
          },
          "taxCategory": {
            "type": "string",
            "description": "Internal tax category (mapped to OSCU tax type internally). e.g. VAT_STANDARD"
          },
          "taxAmount": {
            "type": "number"
          }
        },
        "required": [
          "itemId",
          "description",
          "quantity",
          "unitPrice",
          "taxCategory",
          "taxAmount"
        ]
      },
      "CreateDocumentDto": {
        "type": "object",
        "properties": {
          "merchantId": {
            "type": "string"
          },
          "branchId": {
            "type": "string"
          },
          "sourceSystem": {
            "type": "string",
            "enum": [
              "QUICKBOOKS",
              "XERO",
              "API"
            ]
          },
          "sourceDocumentId": {
            "type": "string"
          },
          "documentType": {
            "type": "string",
            "enum": [
              "SALE",
              "SALE_INVOICE",
              "CREDIT_NOTE",
              "PURCHASE",
              "EXPORT",
              "REVERSE_INVOICE"
            ]
          },
          "documentNumber": {
            "type": "string"
          },
          "currency": {
            "type": "string"
          },
          "exchangeRate": {
            "type": "number"
          },
          "subtotalAmount": {
            "type": "number"
          },
          "totalTax": {
            "type": "number"
          },
          "totalAmount": {
            "type": "number"
          },
          "customerPin": {
            "type": "object",
            "nullable": true
          },
          "lines": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CreateDocumentLineDto"
            }
          }
        },
        "required": [
          "merchantId",
          "branchId",
          "sourceSystem",
          "sourceDocumentId",
          "documentType",
          "documentNumber",
          "currency",
          "exchangeRate",
          "subtotalAmount",
          "totalTax",
          "totalAmount",
          "lines"
        ]
      },
      "SaleLineResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "itemId": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "quantity": {
            "type": "number"
          },
          "unitPrice": {
            "type": "number"
          },
          "taxCategory": {
            "type": "string",
            "enum": [
              "VAT_STANDARD",
              "VAT_ZERO",
              "EXEMPT",
              "OTHER"
            ]
          },
          "taxAmount": {
            "type": "number"
          },
          "classificationCodeSnapshot": {
            "type": "string"
          },
          "unitCodeSnapshot": {
            "type": "string"
          },
          "packagingUnitCodeSnapshot": {
            "type": "object",
            "nullable": true
          },
          "taxTyCdSnapshot": {
            "type": "object",
            "nullable": true
          },
          "productTypeCodeSnapshot": {
            "type": "object",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          }
        },
        "required": [
          "id",
          "itemId",
          "description",
          "quantity",
          "unitPrice",
          "taxCategory",
          "taxAmount",
          "classificationCodeSnapshot",
          "unitCodeSnapshot",
          "packagingUnitCodeSnapshot",
          "taxTyCdSnapshot",
          "productTypeCodeSnapshot",
          "createdAt"
        ]
      },
      "SaleDocumentResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "merchantId": {
            "type": "string"
          },
          "branchId": {
            "type": "string"
          },
          "sourceSystem": {
            "type": "string",
            "enum": [
              "QUICKBOOKS",
              "XERO",
              "API"
            ]
          },
          "sourceDocumentId": {
            "type": "string"
          },
          "documentType": {
            "type": "string",
            "enum": [
              "SALE",
              "SALE_INVOICE",
              "CREDIT_NOTE",
              "PURCHASE",
              "EXPORT",
              "REVERSE_INVOICE"
            ]
          },
          "documentNumber": {
            "type": "string"
          },
          "saleDate": {
            "type": "object",
            "nullable": true,
            "description": "YYYY-MM-DD"
          },
          "receiptTypeCode": {
            "type": "object",
            "nullable": true
          },
          "paymentTypeCode": {
            "type": "object",
            "nullable": true
          },
          "invoiceStatusCode": {
            "type": "object",
            "nullable": true
          },
          "currency": {
            "type": "string"
          },
          "exchangeRate": {
            "type": "number"
          },
          "subtotalAmount": {
            "type": "number"
          },
          "totalAmount": {
            "type": "number"
          },
          "totalTax": {
            "type": "number"
          },
          "customerPin": {
            "type": "object",
            "nullable": true
          },
          "complianceStatus": {
            "type": "string",
            "enum": [
              "DRAFT",
              "VALIDATED",
              "READY_FOR_SUBMISSION",
              "SUBMITTED",
              "ACCEPTED",
              "REJECTED",
              "RETRYING",
              "FAILED",
              "CANCELLED"
            ]
          },
          "submissionAttempts": {
            "type": "number"
          },
          "etimsReceiptNumber": {
            "type": "object",
            "nullable": true
          },
          "idempotencyKey": {
            "type": "string"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "submittedAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "lines": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SaleLineResponseDto"
            }
          }
        },
        "required": [
          "id",
          "merchantId",
          "branchId",
          "sourceSystem",
          "sourceDocumentId",
          "documentType",
          "documentNumber",
          "saleDate",
          "receiptTypeCode",
          "paymentTypeCode",
          "invoiceStatusCode",
          "currency",
          "exchangeRate",
          "subtotalAmount",
          "totalAmount",
          "totalTax",
          "customerPin",
          "complianceStatus",
          "submissionAttempts",
          "etimsReceiptNumber",
          "idempotencyKey",
          "createdAt",
          "submittedAt",
          "lines"
        ]
      },
      "KraSalesSaveResponseDataDto": {
        "type": "object",
        "properties": {
          "curRcptNo": {
            "type": "string"
          },
          "totRcptNo": {
            "type": "string"
          },
          "intrlData": {
            "type": "string"
          },
          "rcptSign": {
            "type": "string"
          },
          "sdcDateTime": {
            "type": "string"
          }
        },
        "required": [
          "curRcptNo",
          "totRcptNo",
          "intrlData",
          "rcptSign",
          "sdcDateTime"
        ]
      },
      "KraSalesSaveResponseDto": {
        "type": "object",
        "properties": {
          "resultCd": {
            "type": "string"
          },
          "resultMsg": {
            "type": "string"
          },
          "resultDt": {
            "type": "string"
          },
          "data": {
            "nullable": true,
            "allOf": [
              {
                "$ref": "#/components/schemas/KraSalesSaveResponseDataDto"
              }
            ]
          }
        },
        "required": [
          "resultCd",
          "resultMsg",
          "resultDt",
          "data"
        ]
      },
      "GetSaleResponseDto": {
        "type": "object",
        "properties": {
          "document": {
            "$ref": "#/components/schemas/SaleDocumentResponseDto"
          },
          "kraResponse": {
            "nullable": true,
            "allOf": [
              {
                "$ref": "#/components/schemas/KraSalesSaveResponseDto"
              }
            ]
          }
        },
        "required": [
          "document",
          "kraResponse"
        ]
      },
      "CursorPaginationDto": {
        "type": "object",
        "properties": {
          "next": {
            "type": "object",
            "nullable": true
          },
          "previous": {
            "type": "object",
            "nullable": true
          },
          "pageSize": {
            "type": "number"
          }
        },
        "required": [
          "next",
          "previous",
          "pageSize"
        ]
      },
      "SalesTaxSummaryDto": {
        "type": "object",
        "properties": {
          "taxableAmountA": {
            "type": "number"
          },
          "taxableAmountB": {
            "type": "number"
          },
          "taxableAmountC": {
            "type": "number"
          },
          "taxableAmountD": {
            "type": "number"
          },
          "taxableAmountE": {
            "type": "number"
          },
          "taxRateA": {
            "type": "number"
          },
          "taxRateB": {
            "type": "number"
          },
          "taxRateC": {
            "type": "number"
          },
          "taxRateD": {
            "type": "number"
          },
          "taxRateE": {
            "type": "number"
          },
          "taxAmountA": {
            "type": "number"
          },
          "taxAmountB": {
            "type": "number"
          },
          "taxAmountC": {
            "type": "number"
          },
          "taxAmountD": {
            "type": "number"
          },
          "taxAmountE": {
            "type": "number"
          },
          "cateringLevyRate": {
            "type": "number"
          },
          "serviceChargeRate": {
            "type": "number"
          },
          "cateringLevyAmount": {
            "type": "number"
          },
          "serviceChargeAmount": {
            "type": "number"
          }
        },
        "required": [
          "taxableAmountA",
          "taxableAmountB",
          "taxableAmountC",
          "taxableAmountD",
          "taxableAmountE",
          "taxRateA",
          "taxRateB",
          "taxRateC",
          "taxRateD",
          "taxRateE",
          "taxAmountA",
          "taxAmountB",
          "taxAmountC",
          "taxAmountD",
          "taxAmountE",
          "cateringLevyRate",
          "serviceChargeRate",
          "cateringLevyAmount",
          "serviceChargeAmount"
        ]
      },
      "SaleItemReportDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "quantity": {
            "type": "number"
          },
          "unitPrice": {
            "type": "number"
          },
          "totalAmount": {
            "type": "number"
          },
          "taxableAmount": {
            "type": "number"
          },
          "taxAmount": {
            "type": "number"
          },
          "taxRate": {
            "type": "number"
          },
          "taxTypeCode": {
            "type": "object",
            "nullable": true
          },
          "discountRate": {
            "type": "number"
          },
          "discountAmount": {
            "type": "number"
          },
          "etimsItemCode": {
            "type": "object",
            "nullable": true
          },
          "isStockable": {
            "type": "object",
            "nullable": true
          },
          "itemId": {
            "type": "string"
          }
        },
        "required": [
          "id",
          "quantity",
          "unitPrice",
          "totalAmount",
          "taxableAmount",
          "taxAmount",
          "taxRate",
          "taxTypeCode",
          "discountRate",
          "discountAmount",
          "etimsItemCode",
          "isStockable",
          "itemId"
        ]
      },
      "SaleReportDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "date": {
            "type": "object",
            "description": "DD/MM/YYYY",
            "nullable": true
          },
          "time": {
            "type": "object",
            "description": "hh:mm:ss am/pm",
            "nullable": true
          },
          "traderInvoiceNumber": {
            "type": "string"
          },
          "receiptTypeCode": {
            "type": "object",
            "nullable": true
          },
          "saleDetailUrl": {
            "type": "object",
            "nullable": true
          },
          "serialNumber": {
            "type": "object",
            "nullable": true
          },
          "receiptNumber": {
            "type": "object",
            "nullable": true
          },
          "invoiceNumber": {
            "type": "object",
            "nullable": true
          },
          "customerId": {
            "type": "object",
            "nullable": true
          },
          "customerName": {
            "type": "object",
            "nullable": true
          },
          "customerTin": {
            "type": "object",
            "nullable": true
          },
          "customerPhoneNumber": {
            "type": "object",
            "nullable": true
          },
          "customerEmail": {
            "type": "object",
            "nullable": true
          },
          "internalData": {
            "type": "object",
            "nullable": true
          },
          "receiptSignature": {
            "type": "object",
            "nullable": true
          },
          "etimsUrl": {
            "type": "object",
            "nullable": true
          },
          "originalSaleId": {
            "type": "object",
            "nullable": true
          },
          "offlineUrl": {
            "type": "object",
            "nullable": true
          },
          "status": {
            "type": "string",
            "description": "Digitax-like status: completed|pending|failed|retrying|cancelled"
          },
          "salesTaxSummary": {
            "$ref": "#/components/schemas/SalesTaxSummaryDto"
          },
          "itemList": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SaleItemReportDto"
            }
          }
        },
        "required": [
          "id",
          "date",
          "time",
          "traderInvoiceNumber",
          "receiptTypeCode",
          "saleDetailUrl",
          "serialNumber",
          "receiptNumber",
          "invoiceNumber",
          "customerId",
          "customerName",
          "customerTin",
          "customerPhoneNumber",
          "customerEmail",
          "internalData",
          "receiptSignature",
          "etimsUrl",
          "originalSaleId",
          "offlineUrl",
          "status",
          "salesTaxSummary",
          "itemList"
        ]
      },
      "SalesReportListResponseDto": {
        "type": "object",
        "properties": {
          "pagination": {
            "$ref": "#/components/schemas/CursorPaginationDto"
          },
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SaleReportDto"
            }
          }
        },
        "required": [
          "pagination",
          "data"
        ]
      },
      "CreateSaleItemDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Catalog item id (stable)"
          },
          "quantity": {
            "type": "number"
          },
          "unitPrice": {
            "type": "number"
          },
          "taxCategory": {
            "type": "string",
            "description": "Internal tax category string (e.g. VAT_STANDARD). Required for MVP until tax engine is added."
          },
          "taxAmount": {
            "type": "number",
            "description": "Tax amount for this line. Required for MVP until tax engine is added."
          },
          "discountRate": {
            "type": "number"
          },
          "discountAmount": {
            "type": "number"
          },
          "itemDescription": {
            "type": "string"
          }
        },
        "required": [
          "id",
          "quantity",
          "unitPrice",
          "taxCategory",
          "taxAmount"
        ]
      },
      "CreateSaleDto": {
        "type": "object",
        "properties": {
          "merchantId": {
            "type": "string"
          },
          "branchId": {
            "type": "string"
          },
          "saleDate": {
            "type": "string",
            "description": "YYYY-MM-DD"
          },
          "traderInvoiceNumber": {
            "type": "string"
          },
          "customerTin": {
            "type": "string"
          },
          "customerName": {
            "type": "string"
          },
          "receiptTypeCode": {
            "type": "string",
            "description": "Receipt type code, e.g. S or R"
          },
          "paymentTypeCode": {
            "type": "string",
            "description": "Payment type code, e.g. 01..08"
          },
          "invoiceStatusCode": {
            "type": "string",
            "description": "Invoice status code (OSCU salesSttsCd)"
          },
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CreateSaleItemDto"
            }
          }
        },
        "required": [
          "merchantId",
          "branchId",
          "saleDate",
          "traderInvoiceNumber",
          "receiptTypeCode",
          "paymentTypeCode",
          "invoiceStatusCode",
          "items"
        ]
      },
      "SaleCreateResponseDto": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": [
              "DRAFT",
              "VALIDATED",
              "READY_FOR_SUBMISSION",
              "SUBMITTED",
              "ACCEPTED",
              "REJECTED",
              "RETRYING",
              "FAILED",
              "CANCELLED"
            ]
          },
          "receiptNumber": {
            "type": "object",
            "nullable": true
          },
          "kraResponse": {
            "nullable": true,
            "allOf": [
              {
                "$ref": "#/components/schemas/KraSalesSaveResponseDto"
              }
            ]
          }
        },
        "required": [
          "id",
          "status",
          "receiptNumber",
          "kraResponse"
        ]
      },
      "SalesReportDetailResponseDto": {
        "type": "object",
        "properties": {
          "data": {
            "$ref": "#/components/schemas/SaleReportDto"
          }
        },
        "required": [
          "data"
        ]
      }
    }
  }
}